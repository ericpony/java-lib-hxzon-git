(function(){function a(d,b){var c=d;setTimeout(function(){if(!c.desktop){return}var f=jq(c.$n()),g=c.getZclass();if(b){f.removeClass(g+"-over-seld").removeClass(g+"-over")}else{if(c._musin){f.addClass(c.isSelected()?g+"-over-seld":g+"-over");var h=c.getMeshWidget(),e=h._musout;if(e&&f[0]!=e.$n()){jq(e.$n()).removeClass(g+"-over-seld").removeClass(g+"-over");e._musin=false;h._musout=null}}}})}zul.sel.ItemWidget=zk.$extends(zul.Widget,{_checkable:true,$define:{checkable:function(){if(this.desktop){this.rerender()}},disabled:function(){if(this.desktop){this.rerender()}},value:null},setSelected:function(b){if(this._selected!=b){var c=this.getMeshWidget();if(c){c.toggleItemSelection(this)}this._setSelectedDirectly(b)}},_setSelectedDirectly:function(b){var c=this.$n();if(c){jq(c)[b?"addClass":"removeClass"](this.getZclass()+"-seld");this._updHeaderCM()}this._selected=b},getLabel:function(){return this.firstChild?this.firstChild.getLabel():null},isSelected:function(){return this._selected},isStripeable_:function(){return true},getMeshWidget:function(){return this.parent},_getVisibleChild:function(d){for(var c=0,b=d.cells.length;c<b;c++){if(zk(d.cells[c]).isVisible()){return d.cells[c]}}return d},setVisible:function(c){if(this._visible!=c){this.$supers("setVisible",arguments);if(this.isStripeable_()){var b=this.getMeshWidget();if(b){b.stripe()}}}},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass();if(this.isDisabled()){b+=(b?" ":"")+c+"-disd"}if(this.isSelected()){b+=(b?" ":"")+c+"-seld"}}return b},_toggleEffect:function(b){a(this,b)},focus_:function(b){var c=this.getMeshWidget();c._focusItem=this;this._doFocusIn();c.focusA_(c.$n("a"),b);return true},_doFocusIn:function(){var b=this.$n();if(b){jq(this._getVisibleChild(b)).addClass(this.getZclass()+"-focus")}if(b=this.getMeshWidget()){b._focusItem=this}},_doFocusOut:function(){var c=this.$n();if(c){var b=this.getZclass();jq(c).removeClass(b+"-focus");jq(c.cells).removeClass(b+"-focus")}},_updHeaderCM:function(b){var d;if((d=this.getMeshWidget())&&d._headercm&&d._multiple){if(b){d._updHeaderCM();return}var e=zk.Widget.$(d._headercm).getZclass()+"-img-seld",c=jq(d._headercm);if(!this.isSelected()){c.removeClass(e)}else{if(!c.hasClass(e)){d._updHeaderCM()}}}},beforeParentChanged_:function(b){if(!b){this._updHeaderCM(true)}this.$supers("beforeParentChanged_",arguments)},afterParentChanged_:function(){if(this.parent){this._updHeaderCM()}this.$supers("afterParentChanged_",arguments)},doSelect_:function(b){if(this.isDisabled()||!this.isCheckable()){return}if(!b.itemSelected){this.getMeshWidget()._doItemSelect(this,b);b.itemSelected=true}this.$supers("doSelect_",arguments)},doMouseOver_:function(b){if(this._musin||this.isDisabled()){return}this._musin=true;this._toggleEffect();b.stop();this.$supers("doMouseOver_",arguments)},doMouseOut_:function(b){if(this.isDisabled()||(this._musin&&jq.isAncestor(this.$n(),b.domEvent.relatedTarget||b.domEvent.toElement))){this.getMeshWidget()._musout=this;return}this._musin=false;this._toggleEffect(true);b.stop({propagation:true});this.$supers("doMouseOut_",arguments)},doKeyDown_:function(b){var c=this.getMeshWidget();if(!zk.gecko3||!jq.nodeName(b.domTarget,"input","textarea")){zk(c.$n()).disableSelection()}c._doKeyDown(b);this.$supers("doKeyDown_",arguments)},doKeyUp_:function(b){var c=this.getMeshWidget();zk(c.$n()).enableSelection();c._doKeyUp(b);this.$supers("doKeyUp_",arguments)},deferRedrawHTML_:function(b){b.push("<tr",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tr>')}})})();