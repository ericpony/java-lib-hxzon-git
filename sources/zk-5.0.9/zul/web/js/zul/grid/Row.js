(function(){function a(){return zk.feature.pe&&zk.isLoaded("zkex.grid")}function b(e,c){var d=e;setTimeout(function(){if(!d.desktop){return}var g=jq(d.$n()),h=d.getZclass()+"-over";if(c){g.removeClass(h)}else{if(d._musin){g.addClass(h);var f=d.parent._musout;if(f&&g[0]!=f.$n()){jq(f.$n()).removeClass(h);f._musin=false;d.parent._musout=null}}}})}zul.grid.Row=zk.$extends(zul.Widget,{$define:{align:function(c){var d=this.$n();if(d){d.align=c}},nowrap:function(c){var e=this.$n();if(e&&(e=e.cells)){for(var d=e.length;d--;){e[d].noWrap=c}}},valign:function(c){var d=this.$n();if(d){d.vAlign=c}}},getGrid:function(){return this.parent?this.parent.parent:null},setVisible:function(c){if(this.isVisible()!=c){this.$supers("setVisible",arguments);if(c&&this.isStripeable_()&&this.parent){this.parent.stripe()}}},getSpans:function(){return zUtl.intsToString(this._spans)},setSpans:function(c){if(this.getSpans()!=c){this._spans=zUtl.stringToInts(c,1);this.rerender()}},_getIndex:function(){return this.parent?this.getChildIndex():-1},getZclass:function(){return this._zclass!=null?this._zclass:"z-row"},getGroup:function(){if(a()&&this.parent&&this.parent.hasGroup()){for(var c=this;c;c=c.previousSibling){if(c.$instanceof(zkex.grid.Group)){return c}}}return null},setStyle:function(c){if(this._style!=c){if(!zk._rowTime){zk._rowTime=jq.now()}this._style=c;this.rerender()}},rerender:function(){if(this.desktop){this.$supers("rerender",arguments);if(this.parent){this.parent._syncStripe()}}},getSclass:function(){var d=this.$supers("getSclass",arguments);if(d!=null){return d}var c=this.getGrid();return c?c.getSclass():d},_getChdextr:function(c){return c.$n("chdextr")||c.$n()},insertChildHTML_:function(e,c,d){if(c){jq(this._getChdextr(c)).before(this.encloseChildHTML_({child:e,index:e.getChildIndex(),zclass:this.getZclass(),cls:"z-overflow-hidden"}))}else{jq(this).append(this.encloseChildHTML_({child:e,index:e.getChildIndex(),zclass:this.getZclass(),cls:"z-overflow-hidden"}))}e.bind(d)},removeChildHTML_:function(c){this.$supers("removeChildHTML_",arguments);jq(c.uuid+"-chdextr",zk).remove()},encloseChildHTML_:function(e){var d=e.out||[],f=e.child,c=f.$instanceof(zul.wgt.Cell);if(!c){d.push('<td id="',f.uuid,'-chdextr"',this._childAttrs(f,e.index),">",'<div id="',f.uuid,'-cell" class="',e.zclass,"-cnt ",e.cls,'">')}f.redraw(d);if(!c){d.push("</div></td>")}if(!e.out){return d.join("")}},_childAttrs:function(f,q){var m=q,t=1;if(this._spans){for(var p=0,n=this._spans.length;p<n;++p){if(p==q){t=this._spans[p];break}m+=this._spans[p]-1}}var o,l,i,c=this.getGrid();if(c){var s=c.columns;if(s){if(m<s.nChildren){var g=s.getChildAt(m);o=g.getColAttrs();l=g.isVisible()?"":"display:none";i=g.getHeight()}}}var d=this.domStyle_({visible:1,width:1,height:1}),e=zk.isLoaded("zkex.grid")&&f.$instanceof(zkex.grid.Detail);if(e){var h=f.getWidth();if(h){d+="width:"+h+";"}}if(l||i){d+=l;if(i){d+="height:"+i+";"}}var r=e?f.getZclass()+"-outer":this.getZclass()+"-inner",u=o||"";if(t!==1){u+=' colspan="'+t+'"'}if(this._nowrap){u+=' nowrap="nowrap"'}if(d){u+=' style="'+d+'"'}return u+' class="'+r+'"'},isStripeable_:function(){return true},domStyle_:function(e){if((a()&&(this.$instanceof(zkex.grid.Group)||this.$instanceof(zkex.grid.Groupfoot)))||(e&&e.visible)){return this.$supers("domStyle_",arguments)}var c=this.$supers("domStyle_",arguments),d=this.getGroup();return d&&!d.isOpen()?c+"display:none;":c},onChildAdded_:function(c){this.$supers("onChildAdded_",arguments);if(c.$instanceof(zul.grid.Detail)){this.detail=c}},onChildRemoved_:function(c){this.$supers("onChildRemoved_",arguments);if(c==this.detail){this.detail=null}},doFocus_:function(c){this.$supers("doFocus_",arguments);var g,k,e,l,h;if((g=this.getGrid())&&g.efrozen&&(k=zk.Widget.$(g.efrozen.firstChild))&&g.rows&&(e=g.rows.$n())){h=jq(c.domTarget).parents("td");for(var f=0,d=h.length;f<d;f++){l=h[f];if(l.parentNode.parentNode==e){g._moveToHidingFocusCell(l.cellIndex);break}}}},doMouseOver_:function(c){if(this._musin){return}this._musin=true;var d=this.$n();if(d&&zk.gecko&&this._draggable&&!jq.nodeName(c.domTarget,"input","textarea")){d.firstChild.style.MozUserSelect="none"}b(this);this.$supers("doMouseOver_",arguments)},doMouseOut_:function(c){var d=this.$n();if((this._musin&&jq.isAncestor(d,c.domEvent.relatedTarget||c.domEvent.toElement))){this.parent._musout=this;return}this._musin=false;if(d&&zk.gecko&&this._draggable){d.firstChild.style.MozUserSelect="none"}b(this,true);this.$supers("doMouseOut_",arguments)},domAttrs_:function(d){var c=this.$supers("domAttrs_",arguments);if(this._align){c+=' align="'+this._align+'"'}if(this._valign){c+=' valign="'+this._valign+'"'}return c},domClass_:function(){var c=this.$supers("domClass_",arguments),d=this.getGrid();if(d&&jq(this.$n()).hasClass(d=d.getOddRowSclass())){return c+" "+d}return c},deferRedrawHTML_:function(c){c.push("<tr",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tr>')}})})();