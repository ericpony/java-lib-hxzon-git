(function(){function a(q,h,b){var p=q.getCollapse();if(!p||"none"==p){return}var g=q.$n("chdex"),i=q.isVertical(),o=q.$class,m=p=="before",f=m?o._prev(g):o._next(g),k=zk.Widget.$(f),e=i?"height":"width",n=0;if(f){if(!h){zWatch.fireDown("onHide",k)}k.setDomVisible_(f,h);k.parent._fixChildDomVisible(k,h);var l=i&&f.cells.length?f.cells[0]:f;n=zk.parseInt(l.style[e]);if(!m&&k&&!k.nextSibling){var d=q.$n("chdex2");if(d){d.style.display=h?"":"none";n+=zk.parseInt(d.style[e])}}}var j=m?o._next(g):o._prev(g);if(j){var l=i&&j.cells.length?j.cells[0]:j;n=zk.parseInt(l.style[e])+(h?-n:n);if(n<0){n=0}l.style[e]=n+"px"}if(f&&h){zUtl.fireShown(k)}if(j){zUtl.fireSized(zk.Widget.$(j),-1)}q._fixNSDomClass();q._fixbtn();q._fixszAll();if(!b||b.sendOnOpen){q.fire("onOpen",{open:h})}}zul.box.Splitter=zk.$extends(zul.Widget,{_collapse:"none",_open:true,$define:{open:function(b,c){if(this.desktop){a(this,b,c)}}},isVertical:function(){var b=this.parent;return !b||b.isVertical()},getOrient:function(){var b=this.parent;return b?b.getOrient():"vertical"},getCollapse:function(){return this._collapse},setCollapse:function(c){if(this._collapse!=c){var b=this._open;if(!b){this.setOpen(true,{sendOnOpen:false})}this._collapse=c;if(this.desktop){this._fixbtn();this._fixsz()}if(!b){this.setOpen(false,{sendOnOpen:false})}}},getZclass:function(){var c=this._zclass,b=this.getMold()=="os"?"z-splitter-os":"z-splitter";return c?c:b+(this.isVertical()?"-ver":"-hor")},setZclass:function(){this.$supers("setZclass",arguments);if(this.desktop){this._fixDomClass(true)}},bind_:function(){this.$supers(zul.box.Splitter,"bind_",arguments);var d=this.parent;if(d&&!d._splitterKid){d._bindWatch()}zWatch.listen({onSize:this,beforeSize:this});this._fixDomClass();var c=this.$n(),e=this.$class;if(!this.$weave){var b=jq(this.$n("btn"));if(zk.ie){b.mouseover(e.onover).mouseout(e.onout)}b.click(e.onclick)}this._fixbtn();this._drag=new zk.Draggable(this,c,{constraint:this.getOrient(),ignoredrag:e._ignoresizing,ghosting:e._ghostsizing,overlay:true,zIndex:12000,initSensitivity:0,snap:e._snap,endeffect:e._endDrag});this._shallClose=!this._open},unbind_:function(){zWatch.unlisten({onSize:this,beforeSize:this});var d=this.$class,b;if(b=this.$n("btn")){var c=jq(b);if(zk.ie){c.unbind("mouseover",d.onover).unbind("mouseout",d.onout)}c.unbind("click",d.onclick)}this._drag.destroy();this._drag=null;this.$supers(zul.box.Splitter,"unbind_",arguments)},_fixDomClass:function(c){var d=this.$n(),e=d.parentNode;if(e){var b=this.isVertical(),f=this.getZclass();if(b){e=e.parentNode}if(e&&e.id.endsWith("-chdex")){e.className=f+"-outer";if(b){d.parentNode.className=f+"-outer-td"}}}if(c){this._fixbtn()}},_fixNSDomClass:function(){jq(this.$n())[this._open?"removeClass":"addClass"](this.getZclass()+"-ns")},_fixbtn:function(){var c=jq(this.$n("btn")),b=this.getCollapse();if(!b||"none"==b){c.hide()}else{var e=this.getZclass(),d=b=="before";if(!this._open){d=!d}if(this.isVertical()){c.removeClass(e+"-btn-"+(d?"b":"t"));c.addClass(e+"-btn-"+(d?"t":"b"))}else{c.removeClass(e+"-btn-"+(d?"r":"l"));c.addClass(e+"-btn-"+(d?"l":"r"))}c.show()}},_fixsz:_zkf=function(){if(!this.isRealVisible()){return}var e=this.$n(),c=e.parentNode;if(c){var d=this.$n("btn"),b="before"==this.getCollapse();if(this.isVertical()){if(b){c.vAlign="top";c.style.backgroundPosition="top left"}else{c.vAlign="bottom";c.style.backgroundPosition="bottom left"}e.style.width="";e.style.width=c.clientWidth+"px";d.style.marginLeft=((e.offsetWidth-d.offsetWidth)/2)+"px"}else{if(b){c.align="left";c.style.backgroundPosition="top left"}else{c.align="right";c.style.backgroundPosition="top right"}e.style.height="";e.style.height=(zk.safari?c.parentNode.clientHeight:c.clientHeight)+"px";d.style.marginTop=((e.offsetHeight-d.offsetHeight)/2)+"px"}}if(this._shallClose){delete this._shallClose;a(this,false,{sendOnOpen:false})}},onSize:_zkf,beforeSize:function(){this.$n().style[this.isVertical()?"width":"height"]=""},_fixszAll:function(){var b;for(var c=this;c=c.parent;){if(c.$instanceof(zul.box.Box)){b=c}}if(b){this.$class._fixKidSplts(b)}else{this._fixsz()}}},{onclick:function(b){var c=zk.Widget.$(b);jq(c.$n("btn")).removeClass(c.getZclass()+"-btn-visi");c.setOpen(!c._open)},_ignoresizing:function(b,i,c){var h=b.control;if(!h._open||h.$n("btn")==c.domTarget){return true}var f=b.run={},d=h.$n(),g=h.$n("chdex"),e=zul.box.Splitter;f.prev=e._prev(g);f.next=e._next(g);if(!f.prev||!f.next){return true}f.prevwgt=h.previousSibling;f.nextwgt=h.nextSibling;f.z_offset=zk(d).cmOffset();return false},_ghostsizing:function(b,e,c){var d=zk(b.node);jq(document.body).append('<div id="zk_ddghost" style="font-size:0;line-height:0;background:#AAA;position:absolute;top:'+e[1]+"px;left:"+e[0]+"px;width:"+d.offsetWidth()+"px;height:"+d.offsetHeight()+'px;"></div>');return jq("#zk_ddghost")[0]},_endDrag:function(n){var m=n.control,g=m.isVertical(),c=m.$n(),k=zul.box.Splitter,f=k._fixLayout(m),e="before"==m.getCollapse(),d=n.run,j,b,i;if(g){j=d.z_point[1];b="height";if(d.next&&d.next.cells.length){d.next=d.next.cells[0]}if(d.prev&&d.prev.cells.length){d.prev=d.prev.cells[0]}}else{j=d.z_point[0];b="width"}if(!j){return}if(i=d.nextwgt){zWatch.fireDown("beforeSize",i)}if(i=d.prevwgt){zWatch.fireDown("beforeSize",i)}var h=0;if(i=d.next){var l=zk.parseInt(i.style[b]);l-=j;if(l<0){l=0}i.style[b]=l+"px";if(!e){i.style.overflow="hidden"}}if(i=d.prev){var l=zk.parseInt(i.style[b]);l+=j;if(l<0){l=0}i.style[b]=l+"px";if(e){i.style.overflow="hidden"}}if(i=d.nextwgt){zUtl.fireSized(i,-1)}if(i=d.prevwgt){zUtl.fireSized(i,-1)}k._unfixLayout(f);m._fixszAll();n.run=null},_snap:function(d,h){var e=d.run,f=d.control,c=h[0],g=h[1];if(f.isVertical()){if(g<=e.z_offset[1]-e.prev.offsetHeight){g=e.z_offset[1]-e.prev.offsetHeight}else{var b=e.z_offset[1]+e.next.offsetHeight-f.$n().offsetHeight;if(g>b){g=b}}}else{if(c<=e.z_offset[0]-e.prev.offsetWidth){c=e.z_offset[0]-e.prev.offsetWidth}else{var b=e.z_offset[0]+e.next.offsetWidth-f.$n().offsetWidth;if(c>b){c=b}}}e.z_point=[c-e.z_offset[0],g-e.z_offset[1]];return[c,g]},_next:function(b){return jq(b).next().next()[0]},_prev:function(b){return jq(b).prev().prev()[0]},_fixKidSplts:function(c){if(c.isVisible()){var b=zul.box.Splitter;if(c.$instanceof(b)){c._fixsz()}for(c=c.firstChild;c;c=c.nextSibling){b._fixKidSplts(c)}}}});if(zk.ie){zul.box.Splitter.onover=function(b){var c=zk.Widget.$(b);$(c.$n("btn")).addClass(c.getZclass()+"-btn-visi")};zul.box.Splitter.onout=function(b){var c=zk.Widget.$(b);$(c.$n("btn")).removeClass(c.getZclass()+"-btn-visi")}}if(zk.opera){zul.box.Splitter._fixLayout=function(d){var b=d.parent.$n();if(b.style.tableLayout!="fixed"){var c=[b,b.style.tableLayout];b.style.tableLayout="fixed";return c}};zul.box.Splitter._unfixLayout=function(b){if(b){b[0].style.tableLayout=b[1]}}}else{zul.box.Splitter._fixLayout=zul.box.Splitter._unfixLayout=zk.$void}})();