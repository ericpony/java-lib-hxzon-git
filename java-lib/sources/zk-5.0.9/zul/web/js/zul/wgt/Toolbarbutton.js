(function(){function b(d){zWatch.listen({onShow:d});var c;if(c=d._upload){d._uplder=new zul.Upload(d,null,c)}}function a(d){var c;if(c=d._uplder){zWatch.unlisten({onShow:d});d._uplder=null;c.destroy()}}zul.wgt.Toolbarbutton=zk.$extends(zul.LabelImageWidget,{_orient:"horizontal",_dir:"normal",$define:{disabled:function(){this.rerender()},href:null,target:null,dir:_zkf=function(){this.updateDomContent_()},orient:_zkf,tabindex:function(c){var d=this.$n();if(d){d.tabIndex=c||""}},autodisable:null,upload:function(c){var d=this.$n();if(d){a(this);if(c&&c!="false"&&!this._disabled){b(this)}}}},getZclass:function(){var c=this._zclass;return c?c:"z-toolbarbutton"},getTextNode:function(){return this.$n().firstChild.firstChild},bind_:function(){this.$supers(zul.wgt.Toolbarbutton,"bind_",arguments);if(!this._disabled){var c=this.$n();this.domListen_(c,"onFocus","doFocus_").domListen_(c,"onBlur","doBlur_")}if(!this._disabled&&this._upload){b(this)}},unbind_:function(){a(this);var c=this.$n();this.domUnlisten_(c,"onFocus","doFocus_").domUnlisten_(c,"onBlur","doBlur_");this.$supers(zul.wgt.Toolbarbutton,"unbind_",arguments)},domContent_:function(){var d=zUtl.encodeXML(this.getLabel()),c=this.getImage();if(!c){return d}c='<img src="'+c+'" align="absmiddle" />';var e="vertical"==this.getOrient()?"<br/>":"&nbsp;";return this.getDir()=="reverse"?d+e+c:c+e+d},domClass_:function(e){var d=this.$supers("domClass_",arguments);if(this._disabled&&(!e||!e.zclass)){var c=this.getZclass();if(c){d+=(d?" ":"")+c+"-disd"}}return d},domAttrs_:function(e){var c=this.$supers("domAttrs_",arguments),d=this.getTabindex();if(d){c+=' tabIndex="'+d+'"'}return c},onShow:function(){if(this._uplder){this._uplder.sync()}},doClick_:function(c){if(!this._disabled){if(!this._upload){zul.wgt.ADBS.autodisable(this)}this.fireX(c);if(!c.stopped){var d=this._href;if(d){zUtl.go(d,{target:this._target||(c.data.ctrlKey?"_blank":"")})}this.$super("doClick_",c,true)}}},doMouseOver_:function(c){if(!this._disabled){jq(this).addClass(this.getZclass()+"-over");this.$supers("doMouseOver_",arguments)}},doMouseOut_:function(c){if(!this._disabled){jq(this).removeClass(this.getZclass()+"-over");this.$supers("doMouseOut_",arguments)}}})})();