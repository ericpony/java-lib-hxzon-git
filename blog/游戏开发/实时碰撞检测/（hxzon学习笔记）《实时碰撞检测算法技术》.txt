（hxzon学习笔记）《实时碰撞检测算法技术》

by hxzon
====
第1章-概述

碰撞检测：
检测两个或多个物体是否相交。
何时相交。
何处相交。

====
第2章-碰撞检测系统中的设计问题

2.1，设计因素
-1，对象的表达方式。
-2，查询类型的多样化。
-3，环境模拟参数。
-4，系统的性能。
-5，系统的健壮性。
-6，系统实现与应用的简易性。

2.2，对象的表达方式
“多边形汤”：一组无序的多边形构成的集合，并且不包含确定多边形相互关系的连接信息。
执行效率低下且算法健壮性差。
例如，多边形汤没有考虑物体对象的“内部”信息。

多边形通过公共边可以连接成一个大型的多边形平面，称作多边形网格。

显示表达：按照顶点、边、面加以定义。
隐式表达：一般指球体、圆锥体、椭圆、圆环以及其他非显示定义的，但可以间接通过数学表达式表示的几何图元。

隐式对象常用于对场景中的物体进行粗略的快速剔除。

凸多边形对象也称作“半空间的交集”。
例如，立方体可描述为6个半空间的交集，其中，每一个半空间均去除了立方体面的部分外部空间。

球体，包围盒，圆柱体也可称为结构几何实体（CSG）对象的“构造块”。
CSG物体属于隐式对象，其中，顶点、边、面都无法直接获取。

2.2.2，碰撞与几何渲染最好分开。

采用与真实尺寸接近的替代几何体。

不建议设计并采用全功能的碰撞检测系统。

一个特定算法相关的例子是粒子系统。

2.3，查询类型。

最简单的查询是“是否碰撞”。
有时还需要相交处的具体数据信息。

对于动态物体，计算一下次碰撞的发生时刻称作“预计到达时刻（ETA）计算”，或称作“碰撞时刻（TOI）计算”。
在刚体模拟中，ETA值往往用于控制时间步（time step）。

2.4，环境模拟参数。

物体对象的数量。两两检测十分昂贵。
分两个阶段，粗略测试阶段和精确测试阶段。
粗略测试将确定可能发生碰撞的较小的一组物体对象，并快速排除那些一定不会碰撞的物体对象。
粗略测试和精确测试也分别称作“n体操作”和“对组合操作”。

物体对象的尺寸。见第7章。

2.4.2，顺序移动和同步移动。

一种可替代的方案是，以顺序的方式处理运动问题，即一次只移动一个物体，若检测到碰撞，则进行处理，随后再继续处理下一个物体。
这种顺序运动并非物理意义上的精确运动模型。
针对游戏程序而言，由于较高的帧速率仅呈现很小的位移量，使得相交区域难以实现量化操作，因而通常可忽略顺序移动模型所产生的问题。

顺序移动模型的优点之一是避免了单一物体的穿透现象。
例如，如果一个物体在运动期间发生了碰撞，则可以简单地撤销该运动位移。

2.4.3，不连续移动与连续移动。

静态碰撞测试。
动态碰撞测试。
静态碰撞测试无须付出太多代价，但是，测试之间的时间步必须足够小，从而使得物体的位移小于其占据的空间范围。
否则，物体只是在相邻的两个时间步内彼此简单地经过对方，这种现象称作“隧道效应”。

扫掠体：在给定时间内，物体连续移动所覆盖的空间体积。
扫掠体相交是物体相交的必要非充分条件。

处理运动的物体时，考虑它们的相对运动通常是一种更可取的方式，即从一个物体的运动中“减去”另一个物体的运动。
考察相对运动方式的一个优点是，当前行为变为一个运动的物体朝向一个静止的物体执行碰撞测试，
从而使得对应的扫掠体测试称为一种精确的相交测试。
在游戏中，扫掠体常被“速度盒（speed box）”所替代，它是一个延长的、包含物体全部运动范围的盒体。

2.5，性能。

2.5.1，优化概览。

最重要的优化方案之一便是粗略测试。
可以采用平面结构执行空间划分，将空间分割成统一尺寸的单元格。见第6章，第7章。

包围体，如果包围体没有产生交叉重叠，则无须进一步执行几何体之间的复杂测试。见第4章。

时间一致性（或称为“帧一致性”。）见第9章。

针对特定平台结构的优化。

2.6，健壮性。
2.7，实现与使用的简洁性。

（2014.3.11，p27）
====
第3章-数学和几何学入门

矩阵，行列式。
利用克莱姆法则计算线性方程组。适用于小型的方程组。
对于较大的方程组，较好的方法是使用高斯消元法。

3.1.6，行列式断言。

拓扑断言的具体使用方法。p33

3.2，坐标系统和顶点。
3.3，向量。
束缚向量，也称为位置向量，采用定点位置加以描述。被约束到不同原点的两个束缚向量是不相等。
通常总是存在一个固定的原点，所以顶点和向量可以互相替换使用。
自由向量。

向量运算，向量的代数恒等式。点积，点积的代数恒等式。
叉积，也称向量积，叉积的代数恒等式。
标量三重积，标量三重积的代数恒等式。

3.4，质心坐标，线段所受重力的中心点或其平衡位置。

质心坐标有多种用途，由于其投影不变性，常用于在不同的坐标系统间实行点映射；
也可用于测试点是否位于三角形内部；
给定一个顶点光照三角形，可以获取三角形内部一点相应的RGB值，从而调整该位置物体的环境光颜色；
对于三角形剪裁，可以插值计算任何属性值，包括颜色值（Gouraud着色）、法线（Phong着色）、纹理坐标（纹理映射）。

3.5，直线，光线，线段。
3.6，平面，半空间。

任意维度内的平面称作超平面，其平面与其所处的空间相比，总是少一个维度。
在2D空间中，超平面对应一条直线。
超平面将空间划分为两组位于平面两侧的无穷点集，这两组集合称作“半空间”。
若半空间包含分割面上的点，则称为“闭半空间”，否则称为“开半空间”。
正半空间位于面法线所指向的一侧。
一个2D半空间也称作半平面。

3.7，多边形。
凸多边形，凹多边形。
凸包。
仿射包。

3.7.1，多边形凸性测试。
采用凸多边形而不是凹多边形，会加快多边形相关操作和相交测试的速度。
对一个包含n边的凸多边形而非同一区域的多个三角形执行测试，往往更加高效。

对于一般的n边多边形，一种简单的方法是，对每一条边，测试所有其他顶点是否严格地位于改边的同一侧。
另外，还需要检测重合的顶点。
过于复杂的多边形，这种算法代价昂贵。

另一个注意因素，当测试在凸多边形顶点间移动，并形成从首顶点到尾顶点的某种环绕方式时，沿任一轴向都只有两种方向性的变化。

3.8，多面体。

凸多面体。
类似多边形，多面体也可描述为有限数量的半空间的交集。

支撑点：对于凸体集，沿给定方向且距离该集合最远的一点称作C的支撑点。
当支撑点是一个顶点时，该顶点一般称作支撑顶点。
支撑映射（或称支撑函数）。

凸体测试。

对于非相交的凸体对象，分割面和分离轴保证了划分物体时的高效测试。见第5章，第9章。

3.9，凸包计算。

有些应用中，凸包可视为碰撞几何体的最小（最紧凑）包围体。
Andrew算法，Quickhull算法。

3.10，Voronoi域。

给定一个平面上的点集S，S内一点P的Voronoi域定义为：
点集S内，距离P最近的面内点集。

Voronoi域和Voronoi图的概念来源于计算几何分支领域，并且应用于最近邻接节点的查询计算。

本书混用Voronoi域和Voronoi特征域。
Voronoi域的包围面称作Voronoi面。

3.11，两个重要的点集操作：Minkowski和，Minkowski差。

本书中，主要是利用minkowski和，将碰撞问题转化为与其对应的另一解决方案。
第5章和第9章将讨论这类转化。

两个物体的minkowski差有时也称作“平移位形空间障碍物（TCSO）”，TCSO上的查询操作则称为位形空间计算。

====
第4章-包围体（BV）。p61















