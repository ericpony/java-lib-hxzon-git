(function(){var a=["before_start","before_end","end_before","end_after","after_end","after_start","start_after","start_before","overlap","overlap_end","overlap_before","overlap_after","at_pointer","after_pointer"];zul.inp.SimpleConstraint=zk.$extends(zk.Object,{$init:function(e,d,f){if(typeof e=="string"){this._flags={};this._init(e)}else{this._flags=typeof e=="number"?this._cvtNum(e):e||{};this._regex=typeof d=="string"?new RegExp(d):d;this._errmsg=f;if(this._flags.SERVER){this.serverValidate=true}}},_init:function(e){l_out:for(var d=0,c=0,b=e.length;c>=0;d=c+1){for(;;++d){if(d>=b){return}var g=e.charAt(d);if(g=="/"){for(c=++d;;++c){if(c>=b){c=-1;break}g=e.charAt(c);if(g=="/"){break}if(g=="\\"){++c}}this._regex=new RegExp(c>=0?e.substring(d,c):e.substring(d),"g");continue l_out}if(g==":"){this._errmsg=e.substring(d+1).trim();return}if(!zUtl.isChar(g,{whitespace:1})){break}}var f;for(c=d;;++c){if(c>=b){f=e.substring(d);c=-1;break}var g=e.charAt(c);if(g==","||g==":"||g==";"||g=="/"){if(this._regex&&d==c){d++;continue}f=e.substring(d,c);if(g==":"||g=="/"){--c}break}}this.parseConstraint_(f.trim().toLowerCase())}},getFlags:function(){return this._flags},parseConstraint_:function(b){var c=this._flags;if(b=="no positive"){c.NO_POSITIVE=true}else{if(b=="no negative"){c.NO_NEGATIVE=true}else{if(b=="no zero"){c.NO_ZERO=true}else{if(b=="no empty"){c.NO_EMPTY=true}else{if(b=="no future"){c.NO_FUTURE=true}else{if(b=="no past"){c.NO_PAST=true}else{if(b=="no today"){c.NO_TODAY=true}else{if(b=="strict"){c.STRICT=true}else{if(b=="server"){c.SERVER=true;this.serverValidate=true}else{if(b&&a.$contains(b)){this._pos=b}else{if(zk.debugJS){zk.error("Unknown constraint: "+b)}}}}}}}}}}}},_cvtNum:function(b){var c={};if(b&1){c.NO_POSITIVE=c.NO_FUTURE=true}if(b&2){c.NO_NEGATIVE=c.NO_PAST=true}if(b&4){c.NO_ZERO=c.NO_TODAY=true}if(b&256){c.NO_EMPTY=true}if(b&512){c.STRICT=true}if(b=(b&61440)){this._pos=a[b>>12]}return c},_cvtNum:function(b){var c={};if(b&1){c.NO_POSITIVE=c.NO_FUTURE=true}if(b&2){c.NO_NEGATIVE=c.NO_PAST=true}if(b&4){c.NO_ZERO=c.NO_TODAY=true}if(b&256){c.NO_EMPTY=true}if(b&512){c.STRICT=true}return c},validate:function(k,j){var h=this._flags,i=this._errmsg;switch(typeof j){case"string":if(h.NO_EMPTY&&(!j||!j.trim())){return i||msgzul.EMPTY_NOT_ALLOWED}var g=this._regex;if(g){var e=j.match(g);if(!e||e.join("")!=j){return i||msgzul.ILLEGAL_VALUE}}if(h.STRICT&&j&&k.validateStrict){i=k.validateStrict(j);if(i){return i}}return;case"number":if(j>0){if(h.NO_POSITIVE){return i||this._msgNumDenied()}}else{if(j==0){if(h.NO_ZERO){return i||this._msgNumDenied()}}else{if(h.NO_NEGATIVE){return i||this._msgNumDenied()}}}return}if(j&&j.getFullYear){var d=zUtl.today(),j=new Date(j.getFullYear(),j.getMonth(),j.getDate());if((d-j)/86400000<0){if(h.NO_FUTURE){return i||this._msgDateDenied()}}else{if(j-d==0){if(h.NO_TODAY){return i||this._msgDateDenied()}}else{if(h.NO_PAST){return i||this._msgDateDenied()}}}return}if(j&&j.compareTo){var c=j.compareTo(0);if(c>0){if(h.NO_POSITIVE){return i||this._msgNumDenied()}}else{if(c==0){if(h.NO_ZERO){return i||this._msgNumDenied()}}else{if(h.NO_NEGATIVE){return i||this._msgNumDenied()}}}return}if(!j&&h.NO_EMPTY){return i||msgzul.EMPTY_NOT_ALLOWED}},_msgNumDenied:function(){var b=this._flags,c=this._errmsg;if(b.NO_POSITIVE){return c||(b.NO_ZERO?b.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE_ZERO:msgzul.NO_POSITIVE_ZERO:b.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE:msgzul.NO_POSITIVE)}else{if(b.NO_NEGATIVE){return c||(b.NO_ZERO?msgzul.NO_NEGATIVE_ZERO:msgzul.NO_NEGATIVE)}else{if(b.NO_ZERO){return c||msgzul.NO_ZERO}}}return c||msgzul.ILLEGAL_VALUE},_msgDateDenied:function(){var b=this._flags,c=this._errmsg;if(b.NO_FUTURE){return c||(b.NO_TODAY?b.NO_PAST?NO_FUTURE_PAST_TODAY:msgzul.NO_FUTURE_TODAY:b.NO_PAST?msgzul.NO_FUTURE_PAST:msgzul.NO_FUTURE)}else{if(b.NO_PAST){return c||(b.NO_TODAY?msgzul.NO_PAST_TODAY:msgzul.NO_PAST)}else{if(b.NO_TODAY){return c||msgzul.NO_TODAY}}}return c||msgzul.ILLEGAL_VALUE}})})();